# 美股股价预测项目治理宪法

## 核心治理原则

### 一、依赖最小化

1. 仅允许使用：`yfinance`（仅用于数据获取，若不可用则跳过）、`pandas`、`numpy`
2. 禁止使用：Prophet、scikit-learn、statsmodels、PyTorch、FastAPI、数据库、Docker
3. Web 层可用 `streamlit`，但核心逻辑不得依赖 streamlit

### 二、代码规范

1. 严格遵循 PEP 8
2. 所有函数/类必须有类型注解（启用 mypy --strict）
3. 所有公共函数必须有 Google 风格 docstring
4. 禁止全局变量、禁止模块顶层副作用代码

### 三、可测性（最高优先级）

1. 每个函数必须是纯函数或显式依赖注入
2. 数据获取、模型预测、结果格式化必须分离
3. 所有函数必须可通过 pytest 单独测试（无需网络/文件系统 mock 优先）

### 四、架构清晰

1. 模块划分：`data.py`（数据）、`model.py`（预测逻辑）、`app.py`（UI）
2. 单文件 ≤ 250 行
3. 配置通过函数参数传递，不使用配置文件

### 五、合规与交付

1. 所有界面显示：“本预测不构成投资建议。”
2. 支持 `streamlit run app.py` 启动
3. 核心逻辑可脱离 Streamlit 独立运行（如 `python -m model.test_predict`）

## 治理机制

1. 本宪法优先于所有其他开发规范和标准。
2. 所有功能实现、代码评审和架构决策必须严格遵循上述原则。
3. 若有复杂性违反，需在项目计划中明确记录并论证。
4. 宪法变更需根据语义化版本规则进行版本号递增（重大变更为 MAJOR，新原则或扩展为 MINOR，表述修正为 PATCH），并附带迁移方案和模板同步说明。
5. 所有合并请求必须包含宪法合规性检查清单。
6. 自动化工具（lint、类型检查）强制执行代码规范原则，人工评审需重点核查依赖最小化和架构清晰性。

**版本**：1.0.0 | **首次制定**：2025-10-22 | **最后修订**：2025-10-22
